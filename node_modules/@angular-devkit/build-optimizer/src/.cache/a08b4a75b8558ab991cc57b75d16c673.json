{"remainingRequest":"/home/developer/Downloads/officialtraderonline/uw-faacrm-landingpage 20180814/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/home/developer/Downloads/officialtraderonline/uw-faacrm-landingpage 20180814/node_modules/@ngx-pwa/local-storage/fesm5/ngx-pwa-local-storage.js","dependencies":[{"path":"/home/developer/Downloads/officialtraderonline/uw-faacrm-landingpage 20180814/node_modules/@ngx-pwa/local-storage/fesm5/ngx-pwa-local-storage.js","mtime":499162500000},{"path":"/home/developer/Downloads/officialtraderonline/uw-faacrm-landingpage 20180814/node_modules/cache-loader/dist/cjs.js","mtime":1538551519155},{"path":"/home/developer/Downloads/officialtraderonline/uw-faacrm-landingpage 20180814/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["/** PURE_IMPORTS_START _angular_core,rxjs,rxjs_operators,_angular_common,tslib PURE_IMPORTS_END */\nimport { InjectionToken, Injectable, Optional, Inject, PLATFORM_ID, defineInjectable, inject } from '@angular/core';\nimport { of, throwError, ReplaySubject, fromEvent, race } from 'rxjs';\nimport { map, mergeMap, first, tap } from 'rxjs/operators';\nimport { isPlatformBrowser } from '@angular/common';\nimport { __values } from 'tslib';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar /** @type {?} */ LOCAL_STORAGE_PREFIX = /*@__PURE__*/ new InjectionToken('localStoragePrefix', { providedIn: 'root', factory: function () { return ''; } });\n/**\n * @param {?} config\n * @return {?}\n */\nfunction localStorageProviders(config) {\n    return [\n        config.prefix ? { provide: LOCAL_STORAGE_PREFIX, useValue: config.prefix } : []\n    ];\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar LocalStorageDatabase = /** @class */ /*@__PURE__*/ (function () {\n    function LocalStorageDatabase(userPrefix) {\n        if (userPrefix === void 0) {\n            userPrefix = null;\n        }\n        this.userPrefix = userPrefix;\n        /* Initializing native localStorage right now to be able to check its support on class instanciation */\n        this.prefix = '';\n        if (userPrefix) {\n            this.prefix = userPrefix + \"_\";\n        }\n    }\n    /**\n     * Gets an item value in local storage\n     * @param key The item's key\n     * @returns The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    LocalStorageDatabase.prototype.getItem = /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n        function (key) {\n            var /** @type {?} */ unparsedData = localStorage.getItem(\"\" + this.prefix + key);\n            var /** @type {?} */ parsedData = null;\n            if (unparsedData != null) {\n                try {\n                    parsedData = JSON.parse(unparsedData);\n                }\n                catch ( /** @type {?} */error) {\n                    return throwError(new Error(\"Invalid data in localStorage.\"));\n                }\n            }\n            return of(parsedData);\n        };\n    /**\n     * Sets an item in local storage\n     * @param key The item's key\n     * @param data The item's value, must NOT be null or undefined\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorageDatabase.prototype.setItem = /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key, data) {\n            localStorage.setItem(\"\" + this.prefix + key, JSON.stringify(data));\n            return of(true);\n        };\n    /**\n     * Deletes an item in local storage\n     * @param key The item's key\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorageDatabase.prototype.removeItem = /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key) {\n            localStorage.removeItem(\"\" + this.prefix + key);\n            return of(true);\n        };\n    /**\n     * Deletes all items from local storage\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorageDatabase.prototype.clear = /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function () {\n            localStorage.clear();\n            return of(true);\n        };\n    /** @nocollapse */ LocalStorageDatabase.ngInjectableDef = defineInjectable({ factory: function LocalStorageDatabase_Factory() { return new LocalStorageDatabase(inject(LOCAL_STORAGE_PREFIX, 8)); }, token: LocalStorageDatabase, providedIn: \"root\" });\n    return LocalStorageDatabase;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar IndexedDBDatabase = /** @class */ /*@__PURE__*/ (function () {\n    /**\n     * Connects to IndexedDB\n     */\n    function IndexedDBDatabase(prefix) {\n        if (prefix === void 0) {\n            prefix = null;\n        }\n        this.prefix = prefix;\n        /**\n         * IndexedDB database name for local storage\n         */\n        this.dbName = 'ngStorage';\n        /**\n         * IndexedDB object store name for local storage\n         */\n        this.objectStoreName = 'localStorage';\n        /**\n         * IndexedDB key path name for local storage (where an item's key will be stored)\n         */\n        this.keyPath = 'key';\n        /**\n         * IndexedDB data path name for local storage (where items' value will be stored)\n         */\n        this.dataPath = 'value';\n        /**\n         * IndexedDB is available but failing in some scenarios (Firefox private mode, Safari cross-origin iframes),\n         * so a fallback can be needed.\n         */\n        this.fallback = null;\n        if (prefix) {\n            this.dbName = prefix + \"_\" + this.dbName;\n        }\n        /* Creating the RxJS ReplaySubject */\n        this.database = new ReplaySubject();\n        /* Connecting to IndexedDB */\n        this.connect(prefix);\n    }\n    /**\n     * Gets an item value in local storage\n     * @param key The item's key\n     * @returns The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    IndexedDBDatabase.prototype.getItem = /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n        function (key) {\n            /* Fallback storage if set */\n            if (this.fallback) {\n                return this.fallback.getItem(key);\n            }\n            /* Opening a trasaction and requesting the item in local storage */\n            return this.getItemFromTransaction(key);\n        };\n    /**\n     * Internal method to factorize the getter for getItem and setItem,\n     * the last one needing to be from a preexisting transaction\n     * @template T\n     * @param {?} key The item's key\n     * @param {?=} transactionParam Optional pre-existing transaction to use for the read request\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    IndexedDBDatabase.prototype.getItemFromTransaction = /**\n     * Internal method to factorize the getter for getItem and setItem,\n     * the last one needing to be from a preexisting transaction\n     * @template T\n     * @param {?} key The item's key\n     * @param {?=} transactionParam Optional pre-existing transaction to use for the read request\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n        function (key, transactionParam) {\n            var _this = this;\n            var /** @type {?} */ transaction$ = transactionParam ? of(transactionParam) : this.transaction();\n            return transaction$.pipe(map(function (transaction) { return transaction.get(key); }), mergeMap(function (request) {\n                /* Listening to the success event, and passing the item value if found, null otherwise */\n                var /** @type {?} */ success = ( /** @type {?} */(fromEvent(request, 'success'))).pipe(map(function (event) { return ( /** @type {?} */(event.target)).result; }), map(function (result) { return result && (_this.dataPath in result) ? ( /** @type {?} */(result[_this.dataPath])) : null; }));\n                /* Merging success and errors events and autoclosing the observable */\n                return ( /** @type {?} */(race(success, _this.toErrorObservable(request, \"getter\"))))\n                    .pipe(first());\n            }), first());\n        };\n    /**\n     * Sets an item in local storage\n     * @param key The item's key\n     * @param data The item's value, must NOT be null or undefined\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    IndexedDBDatabase.prototype.setItem = /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key, data) {\n            var _this = this;\n            /* Fallback storage if set */\n            if (this.fallback) {\n                return this.fallback.setItem(key, data);\n            }\n            /* Storing null is not correctly supported by IndexedDB and unnecessary here */\n            if (data == null) {\n                return of(true);\n            }\n            /* Transaction must be the same for read and write, to avoid concurrency issues */\n            var /** @type {?} */ transaction$ = this.transaction('readwrite');\n            var /** @type {?} */ transaction;\n            /* Opening a transaction */\n            return transaction$.pipe(tap(function (value) {\n                transaction = value;\n            }), /* Check if the key already exists or not */ mergeMap(function () { return _this.getItemFromTransaction(key, transaction); }), map(function (existingData) { return (existingData == null) ? 'add' : 'put'; }), mergeMap(function (method) {\n                var /** @type {?} */ request;\n                /* Adding or updating local storage, based on previous checking */\n                switch (method) {\n                    case 'add':\n                        request = transaction.add((_a = {}, _a[_this.dataPath] = data, _a), key);\n                        break;\n                    case 'put':\n                    default:\n                        request = transaction.put((_b = {}, _b[_this.dataPath] = data, _b), key);\n                        break;\n                }\n                /* Merging success (passing true) and error events and autoclosing the observable */\n                return ( /** @type {?} */(race(_this.toSuccessObservable(request), _this.toErrorObservable(request, \"setter\"))))\n                    .pipe(first());\n                var _a, _b;\n            }), first());\n        };\n    /**\n     * Deletes an item in local storage\n     * @param key The item's key\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    IndexedDBDatabase.prototype.removeItem = /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key) {\n            var _this = this;\n            /* Fallback storage if set */\n            if (this.fallback) {\n                return this.fallback.removeItem(key);\n            }\n            /* Opening a transaction and checking if the item exists in local storage */\n            return this.getItem(key).pipe(mergeMap(function (data) {\n                /* If the item exists in local storage */\n                if (data != null) {\n                    /* Opening a transaction */\n                    return _this.transaction('readwrite').pipe(mergeMap(function (transaction) {\n                        /* Deleting the item in local storage */\n                        var /** @type {?} */ request = transaction.delete(key);\n                        /* Merging success (passing true) and error events and autoclosing the observable */\n                        return ( /** @type {?} */(race(_this.toSuccessObservable(request), _this.toErrorObservable(request, \"remover\"))))\n                            .pipe(first());\n                    }));\n                }\n                /* Passing true if the item does not exist in local storage */\n                return of(true);\n            }), first());\n        };\n    /**\n     * Deletes all items from local storage\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    IndexedDBDatabase.prototype.clear = /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function () {\n            var _this = this;\n            /* Fallback storage if set */\n            if (this.fallback) {\n                return this.fallback.clear();\n            }\n            /* Opening a transaction */\n            return this.transaction('readwrite').pipe(mergeMap(function (transaction) {\n                /* Deleting all items from local storage */\n                var /** @type {?} */ request = transaction.clear();\n                /* Merging success (passing true) and error events and autoclosing the observable */\n                return ( /** @type {?} */(race(_this.toSuccessObservable(request), _this.toErrorObservable(request, \"clearer\"))))\n                    .pipe(first());\n            }), first());\n        };\n    /**\n     * Connects to IndexedDB and creates the object store on first time\n     */\n    /**\n     * Connects to IndexedDB and creates the object store on first time\n     * @param {?=} prefix\n     * @return {?}\n     */\n    IndexedDBDatabase.prototype.connect = /**\n     * Connects to IndexedDB and creates the object store on first time\n     * @param {?=} prefix\n     * @return {?}\n     */\n        function (prefix) {\n            var _this = this;\n            if (prefix === void 0) {\n                prefix = null;\n            }\n            var /** @type {?} */ request;\n            /* Connecting to IndexedDB */\n            try {\n                request = indexedDB.open(this.dbName);\n            }\n            catch ( /** @type {?} */error) {\n                /* Fallback storage if IndexedDb connection is failing */\n                this.setFallback(prefix);\n                return;\n            }\n            /* Listening the event fired on first connection, creating the object store for local storage */\n            ( /** @type {?} */(fromEvent(request, 'upgradeneeded')))\n                .pipe(first())\n                .subscribe(function (event) {\n                /* Getting the database connection */\n                var /** @type {?} */ database = /** @type {?} */ (( /** @type {?} */(event.target)).result);\n                /* Checking if the object store already exists, to avoid error */\n                if (!database.objectStoreNames.contains(_this.objectStoreName)) {\n                    /* Creating the object store for local storage */\n                    database.createObjectStore(_this.objectStoreName);\n                }\n            });\n            /* Listening the success event and converting to an RxJS Observable */\n            var /** @type {?} */ success = /** @type {?} */ (fromEvent(request, 'success'));\n            /* Merging success and errors events */\n            ( /** @type {?} */(race(success, this.toErrorObservable(request, \"connection\"))))\n                .pipe(first())\n                .subscribe(function (event) {\n                /* Storing the database connection for further access */\n                /* Storing the database connection for further access */\n                _this.database.next(/** @type {?} */ (( /** @type {?} */(event.target)).result));\n            }, function () {\n                /* Fallback storage if IndexedDb connection is failing */\n                /* Fallback storage if IndexedDb connection is failing */\n                _this.setFallback(prefix);\n            });\n        };\n    /**\n     * Opens an IndexedDB transaction and gets the local storage object store\n     * @param mode Default to 'readonly' for read operations, or 'readwrite' for write operations\n     * @returns An IndexedDB transaction object store, wrapped in an RxJS Observable\n     */\n    /**\n     * Opens an IndexedDB transaction and gets the local storage object store\n     * @param {?=} mode Default to 'readonly' for read operations, or 'readwrite' for write operations\n     * @return {?} An IndexedDB transaction object store, wrapped in an RxJS Observable\n     */\n    IndexedDBDatabase.prototype.transaction = /**\n     * Opens an IndexedDB transaction and gets the local storage object store\n     * @param {?=} mode Default to 'readonly' for read operations, or 'readwrite' for write operations\n     * @return {?} An IndexedDB transaction object store, wrapped in an RxJS Observable\n     */\n        function (mode) {\n            var _this = this;\n            if (mode === void 0) {\n                mode = 'readonly';\n            }\n            /* From the IndexedDB connection, opening a transaction and getting the local storage objet store */\n            return this.database\n                .pipe(map(function (database) { return database.transaction([_this.objectStoreName], mode).objectStore(_this.objectStoreName); }));\n        };\n    /**\n     * Transforms a IndexedDB success event in an RxJS Observable\n     * @param request The request to listen\n     * @returns A RxJS Observable with true value\n     */\n    /**\n     * Transforms a IndexedDB success event in an RxJS Observable\n     * @param {?} request The request to listen\n     * @return {?} A RxJS Observable with true value\n     */\n    IndexedDBDatabase.prototype.toSuccessObservable = /**\n     * Transforms a IndexedDB success event in an RxJS Observable\n     * @param {?} request The request to listen\n     * @return {?} A RxJS Observable with true value\n     */\n        function (request) {\n            /* Transforming a IndexedDB success event in an RxJS Observable with true value */\n            return ( /** @type {?} */(fromEvent(request, 'success')))\n                .pipe(map(function () { return true; }));\n        };\n    /**\n     * Transforms a IndexedDB error event in an RxJS ErrorObservable\n     * @param request The request to listen\n     * @param error Optionnal details about the error's origin\n     * @returns A RxJS ErrorObservable\n     */\n    /**\n     * Transforms a IndexedDB error event in an RxJS ErrorObservable\n     * @param {?} request The request to listen\n     * @param {?=} error Optionnal details about the error's origin\n     * @return {?} A RxJS ErrorObservable\n     */\n    IndexedDBDatabase.prototype.toErrorObservable = /**\n     * Transforms a IndexedDB error event in an RxJS ErrorObservable\n     * @param {?} request The request to listen\n     * @param {?=} error Optionnal details about the error's origin\n     * @return {?} A RxJS ErrorObservable\n     */\n        function (request, error) {\n            if (error === void 0) {\n                error = \"\";\n            }\n            /* Transforming a IndexedDB error event in an RxJS ErrorObservable */\n            return ( /** @type {?} */(fromEvent(request, 'error')))\n                .pipe(mergeMap(function () { return throwError(new Error(\"IndexedDB \" + error + \" issue : \" + (( /** @type {?} */(request.error))).message + \".\")); }));\n        };\n    /**\n     * @param {?} prefix\n     * @return {?}\n     */\n    IndexedDBDatabase.prototype.setFallback = /**\n     * @param {?} prefix\n     * @return {?}\n     */\n        function (prefix) {\n            this.fallback = new LocalStorageDatabase(prefix);\n        };\n    /** @nocollapse */ IndexedDBDatabase.ngInjectableDef = defineInjectable({ factory: function IndexedDBDatabase_Factory() { return new IndexedDBDatabase(inject(LOCAL_STORAGE_PREFIX, 8)); }, token: IndexedDBDatabase, providedIn: \"root\" });\n    return IndexedDBDatabase;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar MockLocalDatabase = /** @class */ /*@__PURE__*/ (function () {\n    function MockLocalDatabase() {\n        this.localStorage = new Map();\n    }\n    /**\n     * Gets an item value in local storage\n     * @param key The item's key\n     * @returns The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    MockLocalDatabase.prototype.getItem = /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n        function (key) {\n            var /** @type {?} */ rawData = this.localStorage.get(key);\n            return of((rawData !== undefined) ? rawData : null);\n        };\n    /**\n     * Sets an item in local storage\n     * @param key The item's key\n     * @param data The item's value, must NOT be null or undefined\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    MockLocalDatabase.prototype.setItem = /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key, data) {\n            this.localStorage.set(key, data);\n            return of(true);\n        };\n    /**\n     * Deletes an item in local storage\n     * @param key The item's key\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    MockLocalDatabase.prototype.removeItem = /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key) {\n            this.localStorage.delete(key);\n            return of(true);\n        };\n    /**\n     * Deletes all items from local storage\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    MockLocalDatabase.prototype.clear = /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function () {\n            this.localStorage.clear();\n            return of(true);\n        };\n    /** @nocollapse */ MockLocalDatabase.ngInjectableDef = defineInjectable({ factory: function MockLocalDatabase_Factory() { return new MockLocalDatabase(); }, token: MockLocalDatabase, providedIn: \"root\" });\n    return MockLocalDatabase;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @param {?} platformId\n * @param {?} prefix\n * @return {?}\n */\nfunction localDatabaseFactory(platformId, prefix) {\n    if (isPlatformBrowser(platformId) && ('indexedDB' in window) && (indexedDB !== undefined) && (indexedDB !== null)) {\n        /* Try with IndexedDB in modern browsers */\n        return new IndexedDBDatabase(prefix);\n    }\n    else if (isPlatformBrowser(platformId) && ('localStorage' in window) && (localStorage !== undefined) && (localStorage !== null)) {\n        /* Try with localStorage in old browsers (IE9) */\n        return new LocalStorageDatabase(prefix);\n    }\n    else {\n        /* Fake database for server-side rendering (Universal) */\n        return new MockLocalDatabase();\n    }\n}\n/**\n * @abstract\n */\nvar LocalDatabase = /** @class */ /*@__PURE__*/ (function () {\n    function LocalDatabase() {\n    }\n    /** @nocollapse */ LocalDatabase.ngInjectableDef = defineInjectable({ factory: function LocalDatabase_Factory() { return localDatabaseFactory(inject(PLATFORM_ID), inject(LOCAL_STORAGE_PREFIX, 8)); }, token: LocalDatabase, providedIn: \"root\" });\n    return LocalDatabase;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * \\@todo Add other JSON Schema validation features\n */\nvar JSONValidator = /** @class */ /*@__PURE__*/ (function () {\n    function JSONValidator() {\n    }\n    /**\n     * Validate a JSON data against a JSON Schema\n     * @param data JSON data to validate\n     * @param schema Subset of JSON Schema.\n     * Types are enforced to validate everything:\n     * each value MUST have 'type' or 'properties' or 'items' or 'const' or 'enum'.\n     * Therefore, unlike the spec, booleans are not allowed as schemas.\n     * Not all validation features are supported: just follow the interface.\n     * @returns If data is valid : true, if it is invalid : false, and throws if the schema is invalid\n     */\n    /**\n     * Validate a JSON data against a JSON Schema\n     * @param {?} data JSON data to validate\n     * @param {?} schema Subset of JSON Schema.\n     * Types are enforced to validate everything:\n     * each value MUST have 'type' or 'properties' or 'items' or 'const' or 'enum'.\n     * Therefore, unlike the spec, booleans are not allowed as schemas.\n     * Not all validation features are supported: just follow the interface.\n     * @return {?} If data is valid : true, if it is invalid : false, and throws if the schema is invalid\n     */\n    JSONValidator.prototype.validate = /**\n     * Validate a JSON data against a JSON Schema\n     * @param {?} data JSON data to validate\n     * @param {?} schema Subset of JSON Schema.\n     * Types are enforced to validate everything:\n     * each value MUST have 'type' or 'properties' or 'items' or 'const' or 'enum'.\n     * Therefore, unlike the spec, booleans are not allowed as schemas.\n     * Not all validation features are supported: just follow the interface.\n     * @return {?} If data is valid : true, if it is invalid : false, and throws if the schema is invalid\n     */\n        function (data, schema) {\n            /** @todo When TS 2.8, explore if this is possible with conditional types */\n            if (((!(schema.hasOwnProperty('const') && schema.const !== undefined)\n                && !(schema.hasOwnProperty('enum') && schema.enum != null) && !(schema.hasOwnProperty('type') && schema.type != null))\n                || schema.type === 'array' || schema.type === 'object')\n                && !(schema.hasOwnProperty('properties') && schema.properties != null) && !(schema.hasOwnProperty('items') && schema.items != null)) {\n                throw new Error(\"Each value must have a 'type' or 'properties' or 'items' or 'const' or 'enum', to enforce strict types.\");\n            }\n            if (schema.hasOwnProperty('const') && schema.const !== undefined && (data !== schema.const)) {\n                return false;\n            }\n            if (!this.validateEnum(data, schema)) {\n                return false;\n            }\n            if (!this.validateType(data, schema)) {\n                return false;\n            }\n            if (!this.validateItems(data, schema)) {\n                return false;\n            }\n            if (!this.validateProperties(data, schema)) {\n                return false;\n            }\n            if (!this.validateRequired(data, schema)) {\n                return false;\n            }\n            return true;\n        };\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    JSONValidator.prototype.isObjectNotNull = /**\n     * @param {?} value\n     * @return {?}\n     */\n        function (value) {\n            return (value !== null) && (typeof value === 'object');\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateProperties = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (!schema.hasOwnProperty('properties') || (schema.properties == null)) {\n                return true;\n            }\n            if (!this.isObjectNotNull(data)) {\n                return false;\n            }\n            /**\n                 * Check if the object doesn't have more properties than expected\n                 * Equivalent of additionalProperties: false\n                 */\n            if (Object.keys(schema.properties).length !== Object.keys(data).length) {\n                return false;\n            }\n            /* Recursively validate all properties */\n            for (var /** @type {?} */ property in schema.properties) {\n                if (schema.properties.hasOwnProperty(property) && data.hasOwnProperty(property)) {\n                    if (!this.validate(data[property], schema.properties[property])) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateRequired = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (!schema.hasOwnProperty('required') || (schema.required == null)) {\n                return true;\n            }\n            if (!this.isObjectNotNull(data)) {\n                return false;\n            }\n            try {\n                for (var _a = __values(schema.required), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var requiredProp = _b.value;\n                    /* Checks if the property is present in the schema 'properties' */\n                    if (!schema.properties || !schema.properties.hasOwnProperty(requiredProp)) {\n                        throw new Error(\"'required' properties must be described in 'properties' too.\");\n                    }\n                    /* Checks if the property is present in the data */\n                    if (!data.hasOwnProperty(requiredProp)) {\n                        return false;\n                    }\n                }\n            }\n            catch (e_1_1) {\n                e_1 = { error: e_1_1 };\n            }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return))\n                        _c.call(_a);\n                }\n                finally {\n                    if (e_1)\n                        throw e_1.error;\n                }\n            }\n            return true;\n            var e_1, _c;\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateEnum = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (!schema.hasOwnProperty('enum') || (schema.enum == null)) {\n                return true;\n            }\n            /** @todo Move to ES2016 .includes() ? */\n            return (schema.enum.indexOf(data) !== -1);\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateType = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (!schema.hasOwnProperty('type') || (schema.type == null)) {\n                return true;\n            }\n            switch (schema.type) {\n                case 'null':\n                    return data === null;\n                case 'string':\n                    return this.validateString(data, schema);\n                case 'number':\n                case 'integer':\n                    return this.validateNumber(data, schema);\n                case 'boolean':\n                    return typeof data === 'boolean';\n                case 'object':\n                    return typeof data === 'object';\n                case 'array':\n                    return Array.isArray(data);\n            }\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateItems = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (!schema.hasOwnProperty('items') || (schema.items == null)) {\n                return true;\n            }\n            if (!Array.isArray(data)) {\n                return false;\n            }\n            if (schema.hasOwnProperty('maxItems') && (schema.maxItems != null)) {\n                if (!Number.isInteger(schema.maxItems) || schema.maxItems < 0) {\n                    throw new Error(\"'maxItems' must be a non-negative integer.\");\n                }\n                if (data.length > schema.maxItems) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('minItems') && (schema.minItems != null)) {\n                if (!Number.isInteger(schema.minItems) || schema.minItems < 0) {\n                    throw new Error(\"'minItems' must be a non-negative integer.\");\n                }\n                if (data.length < schema.minItems) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('uniqueItems') && (schema.uniqueItems != null)) {\n                if (schema.uniqueItems) {\n                    var /** @type {?} */ dataSet = new Set(data);\n                    if (data.length !== dataSet.size) {\n                        return false;\n                    }\n                }\n            }\n            if (Array.isArray(schema.items)) {\n                return this.validateItemsList(data, schema);\n            }\n            try {\n                for (var data_1 = __values(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {\n                    var value = data_1_1.value;\n                    if (!this.validate(value, schema.items)) {\n                        return false;\n                    }\n                }\n            }\n            catch (e_2_1) {\n                e_2 = { error: e_2_1 };\n            }\n            finally {\n                try {\n                    if (data_1_1 && !data_1_1.done && (_a = data_1.return))\n                        _a.call(data_1);\n                }\n                finally {\n                    if (e_2)\n                        throw e_2.error;\n                }\n            }\n            return true;\n            var e_2, _a;\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateItemsList = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            var /** @type {?} */ items = /** @type {?} */ (schema.items);\n            if (data.length !== items.length) {\n                return false;\n            }\n            for (var /** @type {?} */ i = 0; i < items.length; i += 1) {\n                if (!this.validate(data[i], items[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateString = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (typeof data !== 'string') {\n                return false;\n            }\n            if (schema.hasOwnProperty('maxLength') && (schema.maxLength != null)) {\n                if (!Number.isInteger(schema.maxLength) || schema.maxLength < 0) {\n                    throw new Error(\"'maxLength' must be a non-negative integer.\");\n                }\n                if (data.length > schema.maxLength) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('minLength') && (schema.minLength != null)) {\n                if (!Number.isInteger(schema.minLength) || schema.minLength < 0) {\n                    throw new Error(\"'minLength' must be a non-negative integer.\");\n                }\n                if (data.length < schema.minLength) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('pattern') && (schema.pattern != null)) {\n                var /** @type {?} */ regularExpression = new RegExp(schema.pattern);\n                if (!regularExpression.test(data)) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n    JSONValidator.prototype.validateNumber = /**\n     * @param {?} data\n     * @param {?} schema\n     * @return {?}\n     */\n        function (data, schema) {\n            if (typeof data !== 'number') {\n                return false;\n            }\n            if ((schema.type === 'integer') && !Number.isInteger(data)) {\n                return false;\n            }\n            if (schema.hasOwnProperty('multipleOf') && (schema.multipleOf != null)) {\n                if (schema.multipleOf <= 0) {\n                    throw new Error(\"'multipleOf' must be a number strictly greater than 0.\");\n                }\n                if (!Number.isInteger(data / schema.multipleOf)) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('maximum') && (schema.maximum != null)) {\n                if (data > schema.maximum) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('exclusiveMaximum') && (schema.exclusiveMaximum != null)) {\n                if (data >= schema.exclusiveMaximum) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('minimum') && (schema.minimum != null)) {\n                if (data < schema.minimum) {\n                    return false;\n                }\n            }\n            if (schema.hasOwnProperty('exclusiveMinimum') && (schema.exclusiveMinimum != null)) {\n                if (data <= schema.exclusiveMinimum) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    /** @nocollapse */ JSONValidator.ngInjectableDef = defineInjectable({ factory: function JSONValidator_Factory() { return new JSONValidator(); }, token: JSONValidator, providedIn: \"root\" });\n    return JSONValidator;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar LocalStorage = /** @class */ /*@__PURE__*/ (function () {\n    function LocalStorage(database, jsonValidator) {\n        this.database = database;\n        this.jsonValidator = jsonValidator;\n        this.getItemOptionsDefault = {\n            schema: null\n        };\n    }\n    /**\n     * Gets an item value in local storage\n     * @param key The item's key\n     * @returns The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @param {?=} options\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n    LocalStorage.prototype.getItem = /**\n     * Gets an item value in local storage\n     * @template T\n     * @param {?} key The item's key\n     * @param {?=} options\n     * @return {?} The item's value if the key exists, null otherwise, wrapped in an RxJS Observable\n     */\n        function (key, options) {\n            var _this = this;\n            if (options === void 0) {\n                options = this.getItemOptionsDefault;\n            }\n            return this.database.getItem(key).pipe(/* Validate data upon a json schema if requested */ mergeMap(function (data) {\n                if (options.schema && data !== null) {\n                    var /** @type {?} */ validation = true;\n                    try {\n                        validation = _this.jsonValidator.validate(data, options.schema);\n                    }\n                    catch ( /** @type {?} */error) {\n                        return throwError(error);\n                    }\n                    if (!validation) {\n                        return throwError(new Error(\"JSON invalid\"));\n                    }\n                }\n                return of(data);\n            }));\n        };\n    /**\n     * Sets an item in local storage\n     * @param key The item's key\n     * @param data The item's value, must NOT be null or undefined\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorage.prototype.setItem = /**\n     * Sets an item in local storage\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key, data) {\n            return this.database.setItem(key, data);\n        };\n    /**\n     * Deletes an item in local storage\n     * @param key The item's key\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorage.prototype.removeItem = /**\n     * Deletes an item in local storage\n     * @param {?} key The item's key\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function (key) {\n            return this.database.removeItem(key);\n        };\n    /**\n     * Deletes all items from local storage\n     * @returns An RxJS Observable to wait the end of the operation\n     */\n    /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n    LocalStorage.prototype.clear = /**\n     * Deletes all items from local storage\n     * @return {?} An RxJS Observable to wait the end of the operation\n     */\n        function () {\n            return this.database.clear();\n        };\n    /**\n     * Sets an item in local storage, and auto-subscribes\n     * @param key The item's key\n     * @param data The item's value, must NOT be null or undefined\n     */\n    /**\n     * Sets an item in local storage, and auto-subscribes\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?}\n     */\n    LocalStorage.prototype.setItemSubscribe = /**\n     * Sets an item in local storage, and auto-subscribes\n     * @param {?} key The item's key\n     * @param {?} data The item's value, must NOT be null or undefined\n     * @return {?}\n     */\n        function (key, data) {\n            this.setItem(key, data).subscribe(function () { }, function () { });\n        };\n    /**\n     * Deletes an item in local storage, and auto-subscribes\n     * @param key The item's key\n     */\n    /**\n     * Deletes an item in local storage, and auto-subscribes\n     * @param {?} key The item's key\n     * @return {?}\n     */\n    LocalStorage.prototype.removeItemSubscribe = /**\n     * Deletes an item in local storage, and auto-subscribes\n     * @param {?} key The item's key\n     * @return {?}\n     */\n        function (key) {\n            this.removeItem(key).subscribe(function () { }, function () { });\n        };\n    /** Deletes all items from local storage, and auto-subscribes */\n    /**\n     * Deletes all items from local storage, and auto-subscribes\n     * @return {?}\n     */\n    LocalStorage.prototype.clearSubscribe = /**\n     * Deletes all items from local storage, and auto-subscribes\n     * @return {?}\n     */\n        function () {\n            this.clear().subscribe(function () { }, function () { });\n        };\n    /** @nocollapse */ LocalStorage.ngInjectableDef = defineInjectable({ factory: function LocalStorage_Factory() { return new LocalStorage(inject(LocalDatabase), inject(JSONValidator)); }, token: LocalStorage, providedIn: \"root\" });\n    return LocalStorage;\n}());\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nexport { LocalDatabase, IndexedDBDatabase, LocalStorageDatabase, MockLocalDatabase, JSONValidator, LocalStorage, localStorageProviders, LOCAL_STORAGE_PREFIX, localDatabaseFactory as ɵa };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXB3YS1sb2NhbC1zdG9yYWdlLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9Abmd4LXB3YS9sb2NhbC1zdG9yYWdlL2xpYi90b2tlbnMudHMiLCJuZzovL0BuZ3gtcHdhL2xvY2FsLXN0b3JhZ2UvbGliL2RhdGFiYXNlcy9sb2NhbHN0b3JhZ2UtZGF0YWJhc2UudHMiLCJuZzovL0BuZ3gtcHdhL2xvY2FsLXN0b3JhZ2UvbGliL2RhdGFiYXNlcy9pbmRleGVkZGItZGF0YWJhc2UudHMiLCJuZzovL0BuZ3gtcHdhL2xvY2FsLXN0b3JhZ2UvbGliL2RhdGFiYXNlcy9tb2NrLWxvY2FsLWRhdGFiYXNlLnRzIiwibmc6Ly9Abmd4LXB3YS9sb2NhbC1zdG9yYWdlL2xpYi9kYXRhYmFzZXMvbG9jYWwtZGF0YWJhc2UudHMiLCJuZzovL0BuZ3gtcHdhL2xvY2FsLXN0b3JhZ2UvbGliL3ZhbGlkYXRpb24vanNvbi12YWxpZGF0b3IudHMiLCJuZzovL0BuZ3gtcHdhL2xvY2FsLXN0b3JhZ2UvbGliL2xpYi5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuLCBQcm92aWRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5leHBvcnQgY29uc3QgTE9DQUxfU1RPUkFHRV9QUkVGSVggPSBuZXcgSW5qZWN0aW9uVG9rZW48c3RyaW5nPignbG9jYWxTdG9yYWdlUHJlZml4JywgeyBwcm92aWRlZEluOiAncm9vdCcsIGZhY3Rvcnk6ICgpID0+ICcnIH0pO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvY2FsU3RvcmFnZVByb3ZpZGVyc0NvbmZpZyB7XG5cbiAgLyoqIE9wdGlvbmFsIHByZWZpeCB0byBhdm9pZCBjb2xsaXNpb24gaW4gbXVsdGlwbGUgYXBwcyBvbiBzYW1lIHN1YmRvbWFpbiAqL1xuICBwcmVmaXg/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2NhbFN0b3JhZ2VQcm92aWRlcnMoY29uZmlnOiBMb2NhbFN0b3JhZ2VQcm92aWRlcnNDb25maWcpOiBQcm92aWRlcltdIHtcbiAgcmV0dXJuIFtcbiAgICBjb25maWcucHJlZml4ID8geyBwcm92aWRlOiBMT0NBTF9TVE9SQUdFX1BSRUZJWCwgdXNlVmFsdWU6IGNvbmZpZy5wcmVmaXggfSA6IFtdXG4gIF07XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBPcHRpb25hbCwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiwgdGhyb3dFcnJvciB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBMb2NhbERhdGFiYXNlIH0gZnJvbSAnLi9sb2NhbC1kYXRhYmFzZSc7XG5pbXBvcnQgeyBMT0NBTF9TVE9SQUdFX1BSRUZJWCB9IGZyb20gJy4uL3Rva2Vucyc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIExvY2FsU3RvcmFnZURhdGFiYXNlIGltcGxlbWVudHMgTG9jYWxEYXRhYmFzZSB7XG5cbiAgLyogSW5pdGlhbGl6aW5nIG5hdGl2ZSBsb2NhbFN0b3JhZ2UgcmlnaHQgbm93IHRvIGJlIGFibGUgdG8gY2hlY2sgaXRzIHN1cHBvcnQgb24gY2xhc3MgaW5zdGFuY2lhdGlvbiAqL1xuICBwcm90ZWN0ZWQgcHJlZml4ID0gJyc7XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChMT0NBTF9TVE9SQUdFX1BSRUZJWCkgcHJvdGVjdGVkIHVzZXJQcmVmaXg6IHN0cmluZyB8IG51bGwgPSBudWxsKSB7XG5cbiAgICBpZiAodXNlclByZWZpeCkge1xuICAgICAgdGhpcy5wcmVmaXggPSBgJHt1c2VyUHJlZml4fV9gO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gaXRlbSB2YWx1ZSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHJldHVybnMgVGhlIGl0ZW0ncyB2YWx1ZSBpZiB0aGUga2V5IGV4aXN0cywgbnVsbCBvdGhlcndpc2UsIHdyYXBwZWQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlXG4gICAqL1xuICBnZXRJdGVtPFQgPSBhbnk+KGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxUIHwgbnVsbD4ge1xuXG4gICAgY29uc3QgdW5wYXJzZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5wcmVmaXh9JHtrZXl9YCk7XG4gICAgbGV0IHBhcnNlZERhdGE6IFQgfCBudWxsID0gbnVsbDtcblxuICAgIGlmICh1bnBhcnNlZERhdGEgIT0gbnVsbCkge1xuXG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZWREYXRhID0gSlNPTi5wYXJzZSh1bnBhcnNlZERhdGEpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IobmV3IEVycm9yKGBJbnZhbGlkIGRhdGEgaW4gbG9jYWxTdG9yYWdlLmApKTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiBvZihwYXJzZWREYXRhKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gaXRlbSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHBhcmFtIGRhdGEgVGhlIGl0ZW0ncyB2YWx1ZSwgbXVzdCBOT1QgYmUgbnVsbCBvciB1bmRlZmluZWRcbiAgICogQHJldHVybnMgQW4gUnhKUyBPYnNlcnZhYmxlIHRvIHdhaXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICBzZXRJdGVtKGtleTogc3RyaW5nLCBkYXRhOiBhbnkpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcblxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWAsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcblxuICAgIHJldHVybiBvZih0cnVlKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYW4gaXRlbSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHJldHVybnMgQW4gUnhKUyBPYnNlcnZhYmxlIHRvIHdhaXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG5cbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLnByZWZpeH0ke2tleX1gKTtcblxuICAgIHJldHVybiBvZih0cnVlKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYWxsIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgKiBAcmV0dXJucyBBbiBSeEpTIE9ic2VydmFibGUgdG8gd2FpdCB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb25cbiAgICovXG4gIGNsZWFyKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuXG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG5cbiAgICByZXR1cm4gb2YodHJ1ZSk7XG5cbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBPcHRpb25hbCwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBSZXBsYXlTdWJqZWN0LCBmcm9tRXZlbnQsIG9mLCB0aHJvd0Vycm9yLCByYWNlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIG1lcmdlTWFwLCBmaXJzdCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBMb2NhbERhdGFiYXNlIH0gZnJvbSAnLi9sb2NhbC1kYXRhYmFzZSc7XG5pbXBvcnQgeyBMb2NhbFN0b3JhZ2VEYXRhYmFzZSB9IGZyb20gJy4vbG9jYWxzdG9yYWdlLWRhdGFiYXNlJztcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfUFJFRklYIH0gZnJvbSAnLi4vdG9rZW5zJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgSW5kZXhlZERCRGF0YWJhc2UgaW1wbGVtZW50cyBMb2NhbERhdGFiYXNlIHtcblxuICAvKipcbiAgICogSW5kZXhlZERCIGRhdGFiYXNlIG5hbWUgZm9yIGxvY2FsIHN0b3JhZ2VcbiAgICovXG4gIHByb3RlY3RlZCBkYk5hbWUgPSAnbmdTdG9yYWdlJztcbiAgLyoqXG4gICAqIEluZGV4ZWREQiBvYmplY3Qgc3RvcmUgbmFtZSBmb3IgbG9jYWwgc3RvcmFnZVxuICAgKi9cbiAgcHJvdGVjdGVkIHJlYWRvbmx5IG9iamVjdFN0b3JlTmFtZSA9ICdsb2NhbFN0b3JhZ2UnO1xuICAvKipcbiAgICogSW5kZXhlZERCIGtleSBwYXRoIG5hbWUgZm9yIGxvY2FsIHN0b3JhZ2UgKHdoZXJlIGFuIGl0ZW0ncyBrZXkgd2lsbCBiZSBzdG9yZWQpXG4gICAqL1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkga2V5UGF0aCA9ICdrZXknO1xuICAvKipcbiAgICogSW5kZXhlZERCIGRhdGEgcGF0aCBuYW1lIGZvciBsb2NhbCBzdG9yYWdlICh3aGVyZSBpdGVtcycgdmFsdWUgd2lsbCBiZSBzdG9yZWQpXG4gICAqL1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGF0YVBhdGggPSAndmFsdWUnO1xuICAvKipcbiAgICogSW5kZXhlZERCIGRhdGFiYXNlIGNvbm5lY3Rpb24sIHdyYXBwZWQgaW4gYSBSeEpTIFJlcGxheVN1YmplY3QgdG8gYmUgYWJsZSB0byBhY2Nlc3MgdGhlIGNvbm5lY3Rpb25cbiAgICogZXZlbiBhZnRlciB0aGUgY29ubmVjdGlvbiBzdWNjZXNzIGV2ZW50IGhhcHBlbmVkXG4gICAqL1xuICBwcm90ZWN0ZWQgZGF0YWJhc2U6IFJlcGxheVN1YmplY3Q8SURCRGF0YWJhc2U+O1xuICAvKipcbiAgICogSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBidXQgZmFpbGluZyBpbiBzb21lIHNjZW5hcmlvcyAoRmlyZWZveCBwcml2YXRlIG1vZGUsIFNhZmFyaSBjcm9zcy1vcmlnaW4gaWZyYW1lcyksXG4gICAqIHNvIGEgZmFsbGJhY2sgY2FuIGJlIG5lZWRlZC5cbiAgICovXG4gIHByb3RlY3RlZCBmYWxsYmFjazogTG9jYWxEYXRhYmFzZSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBDb25uZWN0cyB0byBJbmRleGVkREJcbiAgICovXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBJbmplY3QoTE9DQUxfU1RPUkFHRV9QUkVGSVgpIHByb3RlY3RlZCBwcmVmaXg6IHN0cmluZyB8IG51bGwgPSBudWxsKSB7XG5cbiAgICBpZiAocHJlZml4KSB7XG5cbiAgICAgIHRoaXMuZGJOYW1lID0gYCR7cHJlZml4fV8ke3RoaXMuZGJOYW1lfWA7XG5cbiAgICB9XG5cbiAgICAvKiBDcmVhdGluZyB0aGUgUnhKUyBSZXBsYXlTdWJqZWN0ICovXG4gICAgdGhpcy5kYXRhYmFzZSA9IG5ldyBSZXBsYXlTdWJqZWN0PElEQkRhdGFiYXNlPigpO1xuXG4gICAgLyogQ29ubmVjdGluZyB0byBJbmRleGVkREIgKi9cbiAgICB0aGlzLmNvbm5lY3QocHJlZml4KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gaXRlbSB2YWx1ZSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHJldHVybnMgVGhlIGl0ZW0ncyB2YWx1ZSBpZiB0aGUga2V5IGV4aXN0cywgbnVsbCBvdGhlcndpc2UsIHdyYXBwZWQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlXG4gICAqL1xuICBnZXRJdGVtPFQgPSBhbnk+KGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxUw4LCoHwgbnVsbD4ge1xuXG4gICAgLyogRmFsbGJhY2sgc3RvcmFnZSBpZiBzZXQgKi9cbiAgICBpZiAodGhpcy5mYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMuZmFsbGJhY2suZ2V0SXRlbTxUPihrZXkpO1xuICAgIH1cblxuICAgIC8qIE9wZW5pbmcgYSB0cmFzYWN0aW9uIGFuZCByZXF1ZXN0aW5nIHRoZSBpdGVtIGluIGxvY2FsIHN0b3JhZ2UgKi9cbiAgICByZXR1cm4gdGhpcy5nZXRJdGVtRnJvbVRyYW5zYWN0aW9uPFQ+KGtleSk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtZXRob2QgdG8gZmFjdG9yaXplIHRoZSBnZXR0ZXIgZm9yIGdldEl0ZW0gYW5kIHNldEl0ZW0sXG4gICAqIHRoZSBsYXN0IG9uZSBuZWVkaW5nIHRvIGJlIGZyb20gYSBwcmVleGlzdGluZyB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ga2V5IFRoZSBpdGVtJ3Mga2V5XG4gICAqIEBwYXJhbSB0cmFuc2FjdGlvblBhcmFtIE9wdGlvbmFsIHByZS1leGlzdGluZyB0cmFuc2FjdGlvbiB0byB1c2UgZm9yIHRoZSByZWFkIHJlcXVlc3RcbiAgICogQHJldHVybnMgVGhlIGl0ZW0ncyB2YWx1ZSBpZiB0aGUga2V5IGV4aXN0cywgbnVsbCBvdGhlcndpc2UsIHdyYXBwZWQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlXG4gICAqL1xuICBwcml2YXRlIGdldEl0ZW1Gcm9tVHJhbnNhY3Rpb248VCA9IGFueT4oa2V5OiBzdHJpbmcsIHRyYW5zYWN0aW9uUGFyYW0/OiBJREJPYmplY3RTdG9yZSk6IE9ic2VydmFibGU8VMOCwqB8IG51bGw+IHtcblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uJCA9IHRyYW5zYWN0aW9uUGFyYW0gPyBvZih0cmFuc2FjdGlvblBhcmFtKSA6IHRoaXMudHJhbnNhY3Rpb24oKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbiQucGlwZShcbiAgICAgIG1hcCgodHJhbnNhY3Rpb24pID0+IHRyYW5zYWN0aW9uLmdldChrZXkpKSxcbiAgICAgIG1lcmdlTWFwKChyZXF1ZXN0KSA9PiB7XG5cbiAgICAgICAgLyogTGlzdGVuaW5nIHRvIHRoZSBzdWNjZXNzIGV2ZW50LCBhbmQgcGFzc2luZyB0aGUgaXRlbSB2YWx1ZSBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2UgKi9cbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IChmcm9tRXZlbnQocmVxdWVzdCwgJ3N1Y2Nlc3MnKSBhcyBPYnNlcnZhYmxlPEV2ZW50PikucGlwZShcbiAgICAgICAgICBtYXAoKGV2ZW50KSA9PiAoZXZlbnQudGFyZ2V0IGFzIElEQlJlcXVlc3QpLnJlc3VsdCksXG4gICAgICAgICAgbWFwKChyZXN1bHQpID0+IHJlc3VsdCAmJiAodGhpcy5kYXRhUGF0aCBpbiByZXN1bHQpID8gKHJlc3VsdFt0aGlzLmRhdGFQYXRoXSBhcyBUKSA6IG51bGwpXG4gICAgICAgICk7XG5cbiAgICAgICAgLyogTWVyZ2luZyBzdWNjZXNzIGFuZCBlcnJvcnMgZXZlbnRzIGFuZCBhdXRvY2xvc2luZyB0aGUgb2JzZXJ2YWJsZSAqL1xuICAgICAgICByZXR1cm4gKHJhY2Uoc3VjY2VzcywgdGhpcy50b0Vycm9yT2JzZXJ2YWJsZShyZXF1ZXN0LCBgZ2V0dGVyYCkpIGFzIE9ic2VydmFibGU8VCB8IG51bGw+KVxuICAgICAgICAgIC5waXBlKGZpcnN0KCkpO1xuICAgICAgfSksXG4gICAgICBmaXJzdCgpXG4gICAgKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gaXRlbSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHBhcmFtIGRhdGEgVGhlIGl0ZW0ncyB2YWx1ZSwgbXVzdCBOT1QgYmUgbnVsbCBvciB1bmRlZmluZWRcbiAgICogQHJldHVybnMgQW4gUnhKUyBPYnNlcnZhYmxlIHRvIHdhaXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICBzZXRJdGVtKGtleTogc3RyaW5nLCBkYXRhOiBhbnkpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcblxuICAgIC8qIEZhbGxiYWNrIHN0b3JhZ2UgaWYgc2V0ICovXG4gICAgaWYgKHRoaXMuZmFsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrLnNldEl0ZW0oa2V5LCBkYXRhKTtcbiAgICB9XG5cbiAgICAvKiBTdG9yaW5nIG51bGwgaXMgbm90IGNvcnJlY3RseSBzdXBwb3J0ZWQgYnkgSW5kZXhlZERCIGFuZCB1bm5lY2Vzc2FyeSBoZXJlICovXG4gICAgaWYgKGRhdGEgPT0gbnVsbCkge1xuXG4gICAgICByZXR1cm4gb2YodHJ1ZSk7XG5cbiAgICB9XG5cbiAgICAvKiBUcmFuc2FjdGlvbiBtdXN0IGJlIHRoZSBzYW1lIGZvciByZWFkIGFuZCB3cml0ZSwgdG8gYXZvaWQgY29uY3VycmVuY3kgaXNzdWVzICovXG4gICAgY29uc3QgdHJhbnNhY3Rpb24kID0gdGhpcy50cmFuc2FjdGlvbigncmVhZHdyaXRlJyk7XG4gICAgbGV0IHRyYW5zYWN0aW9uOiBJREJPYmplY3RTdG9yZTtcblxuICAgICAgICAvKiBPcGVuaW5nIGEgdHJhbnNhY3Rpb24gKi9cbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uJC5waXBlKFxuICAgICAgICAgIHRhcCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdmFsdWU7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgLyogQ2hlY2sgaWYgdGhlIGtleSBhbHJlYWR5IGV4aXN0cyBvciBub3QgKi9cbiAgICAgICAgICBtZXJnZU1hcCgoKSA9PiB0aGlzLmdldEl0ZW1Gcm9tVHJhbnNhY3Rpb24oa2V5LCB0cmFuc2FjdGlvbikpLFxuICAgICAgICAgIG1hcCgoZXhpc3RpbmdEYXRhKSA9PiAoZXhpc3RpbmdEYXRhID09IG51bGwpID8gJ2FkZCcgOiAncHV0JyksXG4gICAgICAgICAgbWVyZ2VNYXAoKG1ldGhvZCkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgcmVxdWVzdDogSURCUmVxdWVzdDtcblxuICAgICAgICAgICAgLyogQWRkaW5nIG9yIHVwZGF0aW5nIGxvY2FsIHN0b3JhZ2UsIGJhc2VkIG9uIHByZXZpb3VzIGNoZWNraW5nICovXG4gICAgICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5hZGQoeyBbdGhpcy5kYXRhUGF0aF06IGRhdGEgfSwga2V5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAncHV0JzpcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ucHV0KHsgW3RoaXMuZGF0YVBhdGhdOiBkYXRhIH0sIGtleSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIE1lcmdpbmcgc3VjY2VzcyAocGFzc2luZyB0cnVlKSBhbmQgZXJyb3IgZXZlbnRzIGFuZCBhdXRvY2xvc2luZyB0aGUgb2JzZXJ2YWJsZSAqL1xuICAgICAgICAgICAgcmV0dXJuIChyYWNlKHRoaXMudG9TdWNjZXNzT2JzZXJ2YWJsZShyZXF1ZXN0KSwgdGhpcy50b0Vycm9yT2JzZXJ2YWJsZShyZXF1ZXN0LCBgc2V0dGVyYCkpIGFzIE9ic2VydmFibGU8Ym9vbGVhbj4pXG4gICAgICAgICAgICAgIC5waXBlKGZpcnN0KCkpO1xuXG4gICAgICAgIH0pLFxuICAgICAgICBmaXJzdCgpXG4gICAgICApO1xuXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbiBpdGVtIGluIGxvY2FsIHN0b3JhZ2VcbiAgICogQHBhcmFtIGtleSBUaGUgaXRlbSdzIGtleVxuICAgKiBAcmV0dXJucyBBbiBSeEpTIE9ic2VydmFibGUgdG8gd2FpdCB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb25cbiAgICovXG4gIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcblxuICAgIC8qIEZhbGxiYWNrIHN0b3JhZ2UgaWYgc2V0ICovXG4gICAgaWYgKHRoaXMuZmFsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG5cbiAgICAvKiBPcGVuaW5nIGEgdHJhbnNhY3Rpb24gYW5kIGNoZWNraW5nIGlmIHRoZSBpdGVtIGV4aXN0cyBpbiBsb2NhbCBzdG9yYWdlICovXG4gICAgcmV0dXJuIHRoaXMuZ2V0SXRlbShrZXkpLnBpcGUoXG4gICAgICBtZXJnZU1hcCgoZGF0YSkgPT4ge1xuXG4gICAgICAgIC8qIElmIHRoZSBpdGVtIGV4aXN0cyBpbiBsb2NhbCBzdG9yYWdlICovXG4gICAgICAgIGlmIChkYXRhICE9IG51bGwpIHtcblxuICAgICAgICAgIC8qIE9wZW5pbmcgYSB0cmFuc2FjdGlvbiAqL1xuICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKS5waXBlKG1lcmdlTWFwKCh0cmFuc2FjdGlvbikgPT4ge1xuXG4gICAgICAgICAgICAvKiBEZWxldGluZyB0aGUgaXRlbSBpbiBsb2NhbCBzdG9yYWdlICovXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24uZGVsZXRlKGtleSk7XG5cbiAgICAgICAgICAgIC8qIE1lcmdpbmcgc3VjY2VzcyAocGFzc2luZyB0cnVlKSBhbmQgZXJyb3IgZXZlbnRzIGFuZCBhdXRvY2xvc2luZyB0aGUgb2JzZXJ2YWJsZSAqL1xuICAgICAgICAgICAgcmV0dXJuIChyYWNlKHRoaXMudG9TdWNjZXNzT2JzZXJ2YWJsZShyZXF1ZXN0KSwgdGhpcy50b0Vycm9yT2JzZXJ2YWJsZShyZXF1ZXN0LCBgcmVtb3ZlcmApKSBhcyBPYnNlcnZhYmxlPGJvb2xlYW4+KVxuICAgICAgICAgICAgICAucGlwZShmaXJzdCgpKTtcblxuICAgICAgICAgIH0pKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyogUGFzc2luZyB0cnVlIGlmIHRoZSBpdGVtIGRvZXMgbm90IGV4aXN0IGluIGxvY2FsIHN0b3JhZ2UgKi9cbiAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xuXG4gICAgICB9KSxcbiAgICAgIGZpcnN0KClcbiAgICApO1xuXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbGwgaXRlbXMgZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAqIEByZXR1cm5zIEFuIFJ4SlMgT2JzZXJ2YWJsZSB0byB3YWl0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgY2xlYXIoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG5cbiAgICAvKiBGYWxsYmFjayBzdG9yYWdlIGlmIHNldCAqL1xuICAgIGlmICh0aGlzLmZhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5mYWxsYmFjay5jbGVhcigpO1xuICAgIH1cblxuICAgIC8qIE9wZW5pbmcgYSB0cmFuc2FjdGlvbiAqL1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKS5waXBlKFxuICAgICAgbWVyZ2VNYXAoKHRyYW5zYWN0aW9uKSA9PiB7XG5cbiAgICAgICAgLyogRGVsZXRpbmcgYWxsIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZSAqL1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24uY2xlYXIoKTtcblxuICAgICAgICAvKiBNZXJnaW5nIHN1Y2Nlc3MgKHBhc3NpbmcgdHJ1ZSkgYW5kIGVycm9yIGV2ZW50cyBhbmQgYXV0b2Nsb3NpbmcgdGhlIG9ic2VydmFibGUgKi9cbiAgICAgICAgcmV0dXJuIChyYWNlKHRoaXMudG9TdWNjZXNzT2JzZXJ2YWJsZShyZXF1ZXN0KSwgdGhpcy50b0Vycm9yT2JzZXJ2YWJsZShyZXF1ZXN0LCBgY2xlYXJlcmApKSBhcyBPYnNlcnZhYmxlPGJvb2xlYW4+KVxuICAgICAgICAgIC5waXBlKGZpcnN0KCkpO1xuXG4gICAgICB9KSxcbiAgICAgIGZpcnN0KClcbiAgICApO1xuXG4gIH1cblxuICAvKipcbiAgICogQ29ubmVjdHMgdG8gSW5kZXhlZERCIGFuZCBjcmVhdGVzIHRoZSBvYmplY3Qgc3RvcmUgb24gZmlyc3QgdGltZVxuICAgKi9cbiAgcHJvdGVjdGVkIGNvbm5lY3QocHJlZml4OiBzdHJpbmcgfCBudWxsID0gbnVsbCk6IHZvaWQge1xuXG4gICAgbGV0IHJlcXVlc3Q6IElEQk9wZW5EQlJlcXVlc3Q7XG5cbiAgICAvKiBDb25uZWN0aW5nIHRvIEluZGV4ZWREQiAqL1xuICAgIHRyeSB7XG5cbiAgICAgIHJlcXVlc3QgPSBpbmRleGVkREIub3Blbih0aGlzLmRiTmFtZSk7XG5cbiAgICB9w4LCoGNhdGNoIChlcnJvcikge1xuXG4gICAgICAvKiBGYWxsYmFjayBzdG9yYWdlIGlmIEluZGV4ZWREYiBjb25uZWN0aW9uIGlzIGZhaWxpbmcgKi9cbiAgICAgIHRoaXMuc2V0RmFsbGJhY2socHJlZml4KTtcblxuICAgICAgcmV0dXJuO1xuXG4gICAgfVxuXG4gICAgLyogTGlzdGVuaW5nIHRoZSBldmVudCBmaXJlZCBvbiBmaXJzdCBjb25uZWN0aW9uLCBjcmVhdGluZyB0aGUgb2JqZWN0IHN0b3JlIGZvciBsb2NhbCBzdG9yYWdlICovXG4gICAgKGZyb21FdmVudChyZXF1ZXN0LCAndXBncmFkZW5lZWRlZCcpIGFzIE9ic2VydmFibGU8RXZlbnQ+KVxuICAgICAgLnBpcGUoZmlyc3QoKSlcbiAgICAgIC5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG5cbiAgICAgICAgLyogR2V0dGluZyB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiAqL1xuICAgICAgICBjb25zdCBkYXRhYmFzZSA9IChldmVudC50YXJnZXQgYXMgSURCUmVxdWVzdCkucmVzdWx0IGFzIElEQkRhdGFiYXNlO1xuXG4gICAgICAgIC8qIENoZWNraW5nIGlmIHRoZSBvYmplY3Qgc3RvcmUgYWxyZWFkeSBleGlzdHMsIHRvIGF2b2lkIGVycm9yICovXG4gICAgICAgIGlmICghZGF0YWJhc2Uub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0aGlzLm9iamVjdFN0b3JlTmFtZSkpIHtcblxuICAgICAgICAgIC8qIENyZWF0aW5nIHRoZSBvYmplY3Qgc3RvcmUgZm9yIGxvY2FsIHN0b3JhZ2UgKi9cbiAgICAgICAgICBkYXRhYmFzZS5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9KTtcblxuICAgIC8qIExpc3RlbmluZyB0aGUgc3VjY2VzcyBldmVudCBhbmQgY29udmVydGluZyB0byBhbiBSeEpTIE9ic2VydmFibGUgKi9cbiAgICBjb25zdCBzdWNjZXNzID0gZnJvbUV2ZW50KHJlcXVlc3QsICdzdWNjZXNzJykgYXMgT2JzZXJ2YWJsZTxFdmVudD47XG5cbiAgICAvKiBNZXJnaW5nIHN1Y2Nlc3MgYW5kIGVycm9ycyBldmVudHMgKi9cbiAgICAocmFjZShzdWNjZXNzLCB0aGlzLnRvRXJyb3JPYnNlcnZhYmxlKHJlcXVlc3QsIGBjb25uZWN0aW9uYCkpIGFzIE9ic2VydmFibGU8RXZlbnQ+KVxuICAgICAgLnBpcGUoZmlyc3QoKSlcbiAgICAgIC5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG5cbiAgICAgICAgLyogU3RvcmluZyB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBmb3IgZnVydGhlciBhY2Nlc3MgKi9cbiAgICAgICAgdGhpcy5kYXRhYmFzZS5uZXh0KChldmVudC50YXJnZXQgYXMgSURCUmVxdWVzdCkucmVzdWx0IGFzIElEQkRhdGFiYXNlKTtcblxuICAgICAgfSwgKCkgPT4ge1xuXG4gICAgICAgIC8qIEZhbGxiYWNrIHN0b3JhZ2UgaWYgSW5kZXhlZERiIGNvbm5lY3Rpb24gaXMgZmFpbGluZyAqL1xuICAgICAgICB0aGlzLnNldEZhbGxiYWNrKHByZWZpeCk7XG5cbiAgICAgIH0pO1xuXG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgYW4gSW5kZXhlZERCIHRyYW5zYWN0aW9uIGFuZCBnZXRzIHRoZSBsb2NhbCBzdG9yYWdlIG9iamVjdCBzdG9yZVxuICAgKiBAcGFyYW0gbW9kZSBEZWZhdWx0IHRvICdyZWFkb25seScgZm9yIHJlYWQgb3BlcmF0aW9ucywgb3IgJ3JlYWR3cml0ZScgZm9yIHdyaXRlIG9wZXJhdGlvbnNcbiAgICogQHJldHVybnMgQW4gSW5kZXhlZERCIHRyYW5zYWN0aW9uIG9iamVjdCBzdG9yZSwgd3JhcHBlZCBpbiBhbiBSeEpTIE9ic2VydmFibGVcbiAgICovXG4gIHByb3RlY3RlZCB0cmFuc2FjdGlvbihtb2RlOiAncmVhZG9ubHknIHwgJ3JlYWR3cml0ZScgPSAncmVhZG9ubHknKTogT2JzZXJ2YWJsZTxJREJPYmplY3RTdG9yZT4ge1xuXG4gICAgLyogRnJvbSB0aGUgSW5kZXhlZERCIGNvbm5lY3Rpb24sIG9wZW5pbmcgYSB0cmFuc2FjdGlvbiBhbmQgZ2V0dGluZyB0aGUgbG9jYWwgc3RvcmFnZSBvYmpldCBzdG9yZSAqL1xuICAgIHJldHVybiB0aGlzLmRhdGFiYXNlXG4gICAgICAucGlwZShtYXAoKGRhdGFiYXNlKSA9PiBkYXRhYmFzZS50cmFuc2FjdGlvbihbdGhpcy5vYmplY3RTdG9yZU5hbWVdLCBtb2RlKS5vYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSkpKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybXMgYSBJbmRleGVkREIgc3VjY2VzcyBldmVudCBpbiBhbiBSeEpTIE9ic2VydmFibGVcbiAgICogQHBhcmFtIHJlcXVlc3QgVGhlIHJlcXVlc3QgdG8gbGlzdGVuXG4gICAqIEByZXR1cm5zIEEgUnhKUyBPYnNlcnZhYmxlIHdpdGggdHJ1ZSB2YWx1ZVxuICAgKi9cbiAgcHJvdGVjdGVkIHRvU3VjY2Vzc09ic2VydmFibGUocmVxdWVzdDogSURCUmVxdWVzdCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuXG4gICAgLyogVHJhbnNmb3JtaW5nIGEgSW5kZXhlZERCIHN1Y2Nlc3MgZXZlbnQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlIHdpdGggdHJ1ZSB2YWx1ZSAqL1xuICAgIHJldHVybiAoZnJvbUV2ZW50KHJlcXVlc3QsICdzdWNjZXNzJykgYXMgT2JzZXJ2YWJsZTxFdmVudD4pXG4gICAgICAucGlwZShtYXAoKCkgPT4gdHJ1ZSkpO1xuXG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIEluZGV4ZWREQiBlcnJvciBldmVudCBpbiBhbiBSeEpTIEVycm9yT2JzZXJ2YWJsZVxuICAgKiBAcGFyYW0gcmVxdWVzdCBUaGUgcmVxdWVzdCB0byBsaXN0ZW5cbiAgICogQHBhcmFtIGVycm9yIE9wdGlvbm5hbCBkZXRhaWxzIGFib3V0IHRoZSBlcnJvcidzIG9yaWdpblxuICAgKiBAcmV0dXJucyBBIFJ4SlMgRXJyb3JPYnNlcnZhYmxlXG4gICAqL1xuICBwcm90ZWN0ZWQgdG9FcnJvck9ic2VydmFibGUocmVxdWVzdDogSURCUmVxdWVzdCwgZXJyb3IgPSBgYCk6IE9ic2VydmFibGU8bmV2ZXI+IHtcblxuICAgIC8qIFRyYW5zZm9ybWluZyBhIEluZGV4ZWREQiBlcnJvciBldmVudCBpbiBhbiBSeEpTIEVycm9yT2JzZXJ2YWJsZSAqL1xuICAgIHJldHVybiAoZnJvbUV2ZW50KHJlcXVlc3QsICdlcnJvcicpIGFzIE9ic2VydmFibGU8RXZlbnQ+KVxuICAgICAgLnBpcGUobWVyZ2VNYXAoKCkgPT4gdGhyb3dFcnJvcihuZXcgRXJyb3IoYEluZGV4ZWREQiAke2Vycm9yfSBpc3N1ZSA6ICR7KHJlcXVlc3QuZXJyb3IgYXMgRE9NRXhjZXB0aW9uKS5tZXNzYWdlfS5gKSkpKTtcblxuICB9XG5cbiAgcHJvdGVjdGVkIHNldEZhbGxiYWNrKHByZWZpeDogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuZmFsbGJhY2sgPSBuZXcgTG9jYWxTdG9yYWdlRGF0YWJhc2UocHJlZml4KTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBMb2NhbERhdGFiYXNlIH0gZnJvbSAnLi9sb2NhbC1kYXRhYmFzZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE1vY2tMb2NhbERhdGFiYXNlIGltcGxlbWVudHMgTG9jYWxEYXRhYmFzZSB7XG5cbiAgcHJvdGVjdGVkIGxvY2FsU3RvcmFnZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gaXRlbSB2YWx1ZSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHJldHVybnMgVGhlIGl0ZW0ncyB2YWx1ZSBpZiB0aGUga2V5IGV4aXN0cywgbnVsbCBvdGhlcndpc2UsIHdyYXBwZWQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlXG4gICAqL1xuICAgZ2V0SXRlbTxUID0gYW55PihrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8VCB8w4LCoG51bGw+IHtcblxuICAgIGNvbnN0IHJhd0RhdGE6IFQgfCBudWxsID0gdGhpcy5sb2NhbFN0b3JhZ2UuZ2V0KGtleSk7XG5cbiAgICByZXR1cm4gb2YoKHJhd0RhdGEgIT09IHVuZGVmaW5lZCkgPyByYXdEYXRhIDogbnVsbCk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIGl0ZW0gaW4gbG9jYWwgc3RvcmFnZVxuICAgKiBAcGFyYW0ga2V5IFRoZSBpdGVtJ3Mga2V5XG4gICAqIEBwYXJhbSBkYXRhIFRoZSBpdGVtJ3MgdmFsdWUsIG11c3QgTk9UIGJlIG51bGwgb3IgdW5kZWZpbmVkXG4gICAqIEByZXR1cm5zIEFuIFJ4SlMgT2JzZXJ2YWJsZSB0byB3YWl0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2Uuc2V0KGtleSwgZGF0YSk7XG5cbiAgICByZXR1cm4gb2YodHJ1ZSk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuIGl0ZW0gaW4gbG9jYWwgc3RvcmFnZVxuICAgKiBAcGFyYW0ga2V5IFRoZSBpdGVtJ3Mga2V5XG4gICAqIEByZXR1cm5zIEFuIFJ4SlMgT2JzZXJ2YWJsZSB0byB3YWl0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcblxuICAgIHRoaXMubG9jYWxTdG9yYWdlLmRlbGV0ZShrZXkpO1xuXG4gICAgcmV0dXJuIG9mKHRydWUpO1xuXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbGwgaXRlbXMgZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAqIEByZXR1cm5zIEFuIFJ4SlMgT2JzZXJ2YWJsZSB0byB3YWl0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgIGNsZWFyKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2UuY2xlYXIoKTtcblxuICAgIHJldHVybiBvZih0cnVlKTtcblxuICB9XG5cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIFBMQVRGT1JNX0lELCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBJbmRleGVkREJEYXRhYmFzZSB9IGZyb20gJy4vaW5kZXhlZGRiLWRhdGFiYXNlJztcbmltcG9ydCB7IExvY2FsU3RvcmFnZURhdGFiYXNlIH0gZnJvbSAnLi9sb2NhbHN0b3JhZ2UtZGF0YWJhc2UnO1xuaW1wb3J0IHsgTW9ja0xvY2FsRGF0YWJhc2UgfSBmcm9tICcuL21vY2stbG9jYWwtZGF0YWJhc2UnO1xuaW1wb3J0IHsgTE9DQUxfU1RPUkFHRV9QUkVGSVggfSBmcm9tICcuLi90b2tlbnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbG9jYWxEYXRhYmFzZUZhY3RvcnkocGxhdGZvcm1JZDogT2JqZWN0LCBwcmVmaXg6IHN0cmluZyB8IG51bGwpIHtcblxuICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCkgJiYgKCdpbmRleGVkREInIGluIHdpbmRvdykgJiYgKGluZGV4ZWREQiAhPT0gdW5kZWZpbmVkKSAmJiAoaW5kZXhlZERCICE9PSBudWxsKSkge1xuXG4gICAgLyogVHJ5IHdpdGggSW5kZXhlZERCIGluIG1vZGVybiBicm93c2VycyAqL1xuICAgIHJldHVybiBuZXcgSW5kZXhlZERCRGF0YWJhc2UocHJlZml4KTtcblxuICB9IGVsc2UgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHBsYXRmb3JtSWQpICYmICgnbG9jYWxTdG9yYWdlJyBpbiB3aW5kb3cpICYmIChsb2NhbFN0b3JhZ2UgIT09IHVuZGVmaW5lZCkgJiYgKGxvY2FsU3RvcmFnZSAhPT0gbnVsbCkpIHtcblxuICAgIC8qIFRyeSB3aXRoIGxvY2FsU3RvcmFnZSBpbiBvbGQgYnJvd3NlcnMgKElFOSkgKi9cbiAgICByZXR1cm4gbmV3IExvY2FsU3RvcmFnZURhdGFiYXNlKHByZWZpeCk7XG5cbiAgfSBlbHNlIHtcblxuICAgIC8qIEZha2UgZGF0YWJhc2UgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZyAoVW5pdmVyc2FsKSAqL1xuICAgIHJldHVybiBuZXcgTW9ja0xvY2FsRGF0YWJhc2UoKTtcblxuICB9XG5cbn1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIHVzZUZhY3Rvcnk6IGxvY2FsRGF0YWJhc2VGYWN0b3J5LFxuICBkZXBzOiBbXG4gICAgUExBVEZPUk1fSUQsXG4gICAgW25ldyBPcHRpb25hbCgpLCBMT0NBTF9TVE9SQUdFX1BSRUZJWF1cbiAgXVxufSlcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBMb2NhbERhdGFiYXNlIHtcblxuICBhYnN0cmFjdCBnZXRJdGVtPFQgPSBhbnk+KGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxUIHwgbnVsbD47XG4gIGFic3RyYWN0IHNldEl0ZW0oa2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGFic3RyYWN0IHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICBhYnN0cmFjdCBjbGVhcigpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBKU09OU2NoZW1hIH0gZnJvbSAnLi9qc29uLXNjaGVtYSc7XG5cbi8qKlxuICogQHRvZG8gQWRkIG90aGVyIEpTT04gU2NoZW1hIHZhbGlkYXRpb24gZmVhdHVyZXNcbiAqL1xuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgSlNPTlZhbGlkYXRvciB7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGEgSlNPTiBkYXRhIGFnYWluc3QgYSBKU09OIFNjaGVtYVxuICAgKiBAcGFyYW0gZGF0YSBKU09OIGRhdGEgdG8gdmFsaWRhdGVcbiAgICogQHBhcmFtIHNjaGVtYSBTdWJzZXQgb2YgSlNPTiBTY2hlbWEuXG4gICAqIFR5cGVzIGFyZSBlbmZvcmNlZCB0byB2YWxpZGF0ZSBldmVyeXRoaW5nOlxuICAgKiBlYWNoIHZhbHVlIE1VU1QgaGF2ZSAndHlwZScgb3IgJ3Byb3BlcnRpZXMnIG9yICdpdGVtcycgb3IgJ2NvbnN0JyBvciAnZW51bScuXG4gICAqIFRoZXJlZm9yZSwgdW5saWtlIHRoZSBzcGVjLCBib29sZWFucyBhcmUgbm90IGFsbG93ZWQgYXMgc2NoZW1hcy5cbiAgICogTm90IGFsbCB2YWxpZGF0aW9uIGZlYXR1cmVzIGFyZSBzdXBwb3J0ZWQ6IGp1c3QgZm9sbG93IHRoZSBpbnRlcmZhY2UuXG4gICAqIEByZXR1cm5zIElmIGRhdGEgaXMgdmFsaWQgOiB0cnVlLCBpZiBpdCBpcyBpbnZhbGlkIDogZmFsc2UsIGFuZCB0aHJvd3MgaWYgdGhlIHNjaGVtYSBpcyBpbnZhbGlkXG4gICAqL1xuICB2YWxpZGF0ZShkYXRhOiBhbnksIHNjaGVtYTogSlNPTlNjaGVtYSk6IGJvb2xlYW4ge1xuXG4gICAgLyoqIEB0b2RvIFdoZW4gVFMgMi44LCBleHBsb3JlIGlmIHRoaXMgaXMgcG9zc2libGUgd2l0aCBjb25kaXRpb25hbCB0eXBlcyAqL1xuICAgIGlmICgoKCEoc2NoZW1hLmhhc093blByb3BlcnR5KCdjb25zdCcpICYmIHNjaGVtYS5jb25zdCAhPT0gdW5kZWZpbmVkKVxuICAgICYmICEoc2NoZW1hLmhhc093blByb3BlcnR5KCdlbnVtJykgJiYgc2NoZW1hLmVudW0gIT0gbnVsbCkgJiYgIShzY2hlbWEuaGFzT3duUHJvcGVydHkoJ3R5cGUnKSAmJiBzY2hlbWEudHlwZSAhPSBudWxsKSlcbiAgICB8fCBzY2hlbWEudHlwZSA9PT0gJ2FycmF5JyB8fCBzY2hlbWEudHlwZSA9PT0gJ29iamVjdCcpXG4gICAgJiYgIShzY2hlbWEuaGFzT3duUHJvcGVydHkoJ3Byb3BlcnRpZXMnKSAmJiBzY2hlbWEucHJvcGVydGllcyAhPSBudWxsKSAgJiYgIShzY2hlbWEuaGFzT3duUHJvcGVydHkoJ2l0ZW1zJykgJiYgc2NoZW1hLml0ZW1zICE9IG51bGwpKSB7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRWFjaCB2YWx1ZSBtdXN0IGhhdmUgYSAndHlwZScgb3IgJ3Byb3BlcnRpZXMnIG9yICdpdGVtcycgb3IgJ2NvbnN0JyBvciAnZW51bScsIHRvIGVuZm9yY2Ugc3RyaWN0IHR5cGVzLmApO1xuXG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgnY29uc3QnKSAmJiBzY2hlbWEuY29uc3QgIT09IHVuZGVmaW5lZCAmJiAoZGF0YSAhPT0gc2NoZW1hLmNvbnN0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy52YWxpZGF0ZUVudW0oZGF0YSwgc2NoZW1hKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy52YWxpZGF0ZVR5cGUoZGF0YSwgc2NoZW1hKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy52YWxpZGF0ZUl0ZW1zKGRhdGEsIHNjaGVtYSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmFsaWRhdGVSZXF1aXJlZChkYXRhLCBzY2hlbWEpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfVxuXG4gIHByb3RlY3RlZCBpc09iamVjdE5vdE51bGwodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXG4gICAgcmV0dXJuICh2YWx1ZSAhPT0gbnVsbCkgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgdmFsaWRhdGVQcm9wZXJ0aWVzKGRhdGE6IHsgW2s6IHN0cmluZ106IGFueTsgfSwgc2NoZW1hOiBKU09OU2NoZW1hKTogYm9vbGVhbiB7XG5cbiAgICBpZiAoIXNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgncHJvcGVydGllcycpIHx8IChzY2hlbWEucHJvcGVydGllcyA9PSBudWxsKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzT2JqZWN0Tm90TnVsbChkYXRhKSkge1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgb2JqZWN0IGRvZXNuJ3QgaGF2ZSBtb3JlIHByb3BlcnRpZXMgdGhhbiBleHBlY3RlZFxuICAgICAqIEVxdWl2YWxlbnQgb2YgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlXG4gICAgICovXG4gICAgaWYgKE9iamVjdC5rZXlzKHNjaGVtYS5wcm9wZXJ0aWVzKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCkge1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9XG5cbiAgICAvKiBSZWN1cnNpdmVseSB2YWxpZGF0ZSBhbGwgcHJvcGVydGllcyAqL1xuICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gc2NoZW1hLnByb3BlcnRpZXMpIHtcblxuICAgICAgaWYgKHNjaGVtYS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiBkYXRhLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuXG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZShkYXRhW3Byb3BlcnR5XSwgc2NoZW1hLnByb3BlcnRpZXNbcHJvcGVydHldKSkge1xuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfVxuXG4gIHByb3RlY3RlZCB2YWxpZGF0ZVJlcXVpcmVkKGRhdGE6IHt9LCBzY2hlbWE6IEpTT05TY2hlbWEpOiBib29sZWFuIHtcblxuICAgIGlmICghc2NoZW1hLmhhc093blByb3BlcnR5KCdyZXF1aXJlZCcpIHx8IChzY2hlbWEucmVxdWlyZWQgPT0gbnVsbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc09iamVjdE5vdE51bGwoZGF0YSkpIHtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZXF1aXJlZFByb3Agb2Ygc2NoZW1hLnJlcXVpcmVkKSB7XG5cbiAgICAgIC8qIENoZWNrcyBpZiB0aGUgcHJvcGVydHkgaXMgcHJlc2VudCBpbiB0aGUgc2NoZW1hICdwcm9wZXJ0aWVzJyAqL1xuICAgICAgaWYgKCFzY2hlbWEucHJvcGVydGllcyB8fCAhc2NoZW1hLnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocmVxdWlyZWRQcm9wKSkge1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJ3JlcXVpcmVkJyBwcm9wZXJ0aWVzIG11c3QgYmUgZGVzY3JpYmVkIGluICdwcm9wZXJ0aWVzJyB0b28uYCk7XG5cbiAgICAgIH1cblxuICAgICAgLyogQ2hlY2tzIGlmIHRoZSBwcm9wZXJ0eSBpcyBwcmVzZW50IGluIHRoZSBkYXRhICovXG4gICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkocmVxdWlyZWRQcm9wKSkge1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfVxuXG4gIHByb3RlY3RlZCB2YWxpZGF0ZUVudW0oZGF0YTogYW55LCBzY2hlbWE6IEpTT05TY2hlbWEpOiBib29sZWFuIHtcblxuICAgIGlmICghc2NoZW1hLmhhc093blByb3BlcnR5KCdlbnVtJykgfHwgKHNjaGVtYS5lbnVtID09IG51bGwpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKiogQHRvZG8gTW92ZSB0byBFUzIwMTYgLmluY2x1ZGVzKCkgPyAqL1xuICAgIHJldHVybiAoc2NoZW1hLmVudW0uaW5kZXhPZihkYXRhKSAhPT0gLTEpO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgdmFsaWRhdGVUeXBlKGRhdGE6IGFueSwgc2NoZW1hOiBKU09OU2NoZW1hKTogYm9vbGVhbiB7XG5cbiAgICBpZiAoIXNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgndHlwZScpIHx8IChzY2hlbWEudHlwZSA9PSBudWxsKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgc3dpdGNoIChzY2hlbWEudHlwZSkge1xuXG4gICAgICBjYXNlICdudWxsJzpcbiAgICAgICAgcmV0dXJuIGRhdGEgPT09IG51bGw7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVN0cmluZyhkYXRhLCBzY2hlbWEpO1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGNhc2UgJ2ludGVnZXInOlxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZU51bWJlcihkYXRhLCBzY2hlbWEpO1xuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gJ2Jvb2xlYW4nO1xuICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JztcbiAgICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZGF0YSk7XG5cbiAgICB9XG5cbiAgfVxuXG4gIHByb3RlY3RlZCB2YWxpZGF0ZUl0ZW1zKGRhdGE6IGFueVtdLCBzY2hlbWE6IEpTT05TY2hlbWEpOiBib29sZWFuIHtcblxuICAgIGlmICghc2NoZW1hLmhhc093blByb3BlcnR5KCdpdGVtcycpIHx8IChzY2hlbWEuaXRlbXMgPT0gbnVsbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9XG5cbiAgICBpZiAoc2NoZW1hLmhhc093blByb3BlcnR5KCdtYXhJdGVtcycpICYmIChzY2hlbWEubWF4SXRlbXMgIT0gbnVsbCkpIHtcblxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHNjaGVtYS5tYXhJdGVtcykgfHwgc2NoZW1hLm1heEl0ZW1zIDwgMCkge1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJ21heEl0ZW1zJyBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIuYCk7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEubGVuZ3RoID4gc2NoZW1hLm1heEl0ZW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmIChzY2hlbWEuaGFzT3duUHJvcGVydHkoJ21pbkl0ZW1zJykgJiYgKHNjaGVtYS5taW5JdGVtcyAhPSBudWxsKSkge1xuXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoc2NoZW1hLm1pbkl0ZW1zKSB8fCBzY2hlbWEubWluSXRlbXMgPCAwKSB7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnbWluSXRlbXMnIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci5gKTtcblxuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPCBzY2hlbWEubWluSXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgndW5pcXVlSXRlbXMnKSAmJiAoc2NoZW1hLnVuaXF1ZUl0ZW1zICE9IG51bGwpKSB7XG5cbiAgICAgIGlmIChzY2hlbWEudW5pcXVlSXRlbXMpIHtcblxuICAgICAgICBjb25zdCBkYXRhU2V0ID0gbmV3IFNldChkYXRhKTtcblxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggIT09IGRhdGFTZXQuc2l6ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEuaXRlbXMpKSB7XG5cbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlSXRlbXNMaXN0KGRhdGEsIHNjaGVtYSk7XG5cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRhdGEpIHtcblxuICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlKHZhbHVlLCBzY2hlbWEuaXRlbXMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgdmFsaWRhdGVJdGVtc0xpc3QoZGF0YTogYW55LCBzY2hlbWE6IEpTT05TY2hlbWEpOiBib29sZWFuIHtcblxuICAgIGNvbnN0IGl0ZW1zID0gc2NoZW1hLml0ZW1zIGFzIEpTT05TY2hlbWFbXTtcblxuICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gaXRlbXMubGVuZ3RoKSB7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcblxuICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlKGRhdGFbaV0sIGl0ZW1zW2ldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9XG5cbiAgcHJvdGVjdGVkIHZhbGlkYXRlU3RyaW5nKGRhdGE6IGFueSwgc2NoZW1hOiBKU09OU2NoZW1hKTogYm9vbGVhbiB7XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgnbWF4TGVuZ3RoJykgJiYgKHNjaGVtYS5tYXhMZW5ndGggIT0gbnVsbCkpIHtcblxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHNjaGVtYS5tYXhMZW5ndGgpIHx8IHNjaGVtYS5tYXhMZW5ndGggPCAwKSB7XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnbWF4TGVuZ3RoJyBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIuYCk7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEubGVuZ3RoID4gc2NoZW1hLm1heExlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBpZiAoc2NoZW1hLmhhc093blByb3BlcnR5KCdtaW5MZW5ndGgnKSAmJiAoc2NoZW1hLm1pbkxlbmd0aCAhPSBudWxsKSkge1xuXG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoc2NoZW1hLm1pbkxlbmd0aCkgfHwgc2NoZW1hLm1pbkxlbmd0aCA8IDApIHtcblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCdtaW5MZW5ndGgnIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci5gKTtcblxuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPCBzY2hlbWEubWluTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmIChzY2hlbWEuaGFzT3duUHJvcGVydHkoJ3BhdHRlcm4nKSAmJiAoc2NoZW1hLnBhdHRlcm4gIT0gbnVsbCkpIHtcblxuICAgICAgY29uc3QgcmVndWxhckV4cHJlc3Npb24gPSBuZXcgUmVnRXhwKHNjaGVtYS5wYXR0ZXJuKTtcblxuICAgICAgaWYgKCFyZWd1bGFyRXhwcmVzc2lvbi50ZXN0KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgdmFsaWRhdGVOdW1iZXIoZGF0YTogYW55LCBzY2hlbWE6IEpTT05TY2hlbWEpOiBib29sZWFuIHtcblxuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoKHNjaGVtYS50eXBlID09PSAnaW50ZWdlcicpICYmICFOdW1iZXIuaXNJbnRlZ2VyKGRhdGEpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgnbXVsdGlwbGVPZicpICYmIChzY2hlbWEubXVsdGlwbGVPZiAhPSBudWxsKSkge1xuXG4gICAgICBpZiAoc2NoZW1hLm11bHRpcGxlT2YgPD0gMCkge1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJ211bHRpcGxlT2YnIG11c3QgYmUgYSBudW1iZXIgc3RyaWN0bHkgZ3JlYXRlciB0aGFuIDAuYCk7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGRhdGEgLyBzY2hlbWEubXVsdGlwbGVPZikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgnbWF4aW11bScpICYmIChzY2hlbWEubWF4aW11bSAhPSBudWxsKSkge1xuXG4gICAgICBpZiAoZGF0YSA+IHNjaGVtYS5tYXhpbXVtKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmIChzY2hlbWEuaGFzT3duUHJvcGVydHkoJ2V4Y2x1c2l2ZU1heGltdW0nKSAmJiAoc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gIT0gbnVsbCkpIHtcblxuICAgICAgaWYgKGRhdGEgPj0gc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSgnbWluaW11bScpICYmIChzY2hlbWEubWluaW11bSAhPSBudWxsKSkge1xuXG4gICAgICBpZiAoZGF0YSA8IHNjaGVtYS5taW5pbXVtKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmIChzY2hlbWEuaGFzT3duUHJvcGVydHkoJ2V4Y2x1c2l2ZU1pbmltdW0nKSAmJiAoc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gIT0gbnVsbCkpIHtcblxuICAgICAgaWYgKGRhdGEgPD0gc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCB0aHJvd0Vycm9yLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWVyZ2VNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IExvY2FsRGF0YWJhc2UgfSBmcm9tICcuL2RhdGFiYXNlcy9sb2NhbC1kYXRhYmFzZSc7XG5pbXBvcnQgeyBKU09OU2NoZW1hIH0gZnJvbSAnLi92YWxpZGF0aW9uL2pzb24tc2NoZW1hJztcbmltcG9ydCB7IEpTT05WYWxpZGF0b3IgfSBmcm9tICcuL3ZhbGlkYXRpb24vanNvbi12YWxpZGF0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIExTR2V0SXRlbU9wdGlvbnMge1xuICBzY2hlbWE/OiBKU09OU2NoZW1hIHwgbnVsbDtcbn1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlIHtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgZ2V0SXRlbU9wdGlvbnNEZWZhdWx0OiBMU0dldEl0ZW1PcHRpb25zID0ge1xuICAgIHNjaGVtYTogbnVsbFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBkYXRhYmFzZTogTG9jYWxEYXRhYmFzZSwgcHJvdGVjdGVkIGpzb25WYWxpZGF0b3I6IEpTT05WYWxpZGF0b3IpIHt9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gaXRlbSB2YWx1ZSBpbiBsb2NhbCBzdG9yYWdlXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICogQHJldHVybnMgVGhlIGl0ZW0ncyB2YWx1ZSBpZiB0aGUga2V5IGV4aXN0cywgbnVsbCBvdGhlcndpc2UsIHdyYXBwZWQgaW4gYW4gUnhKUyBPYnNlcnZhYmxlXG4gICAqL1xuICBnZXRJdGVtPFQgPSBhbnk+KGtleTogc3RyaW5nLCBvcHRpb25zOiBMU0dldEl0ZW1PcHRpb25zID0gdGhpcy5nZXRJdGVtT3B0aW9uc0RlZmF1bHQpOiBPYnNlcnZhYmxlPFQgfCBudWxsPiB7XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhYmFzZS5nZXRJdGVtPFQ+KGtleSkucGlwZShcblxuICAgICAgLyogVmFsaWRhdGUgZGF0YSB1cG9uIGEganNvbiBzY2hlbWEgaWYgcmVxdWVzdGVkICovXG4gICAgICBtZXJnZU1hcCgoZGF0YSkgPT4ge1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNjaGVtYSAmJiBkYXRhICE9PSBudWxsKSB7XG5cbiAgICAgICAgICBsZXQgdmFsaWRhdGlvbiA9IHRydWU7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbiA9IHRoaXMuanNvblZhbGlkYXRvci52YWxpZGF0ZShkYXRhLCBvcHRpb25zLnNjaGVtYSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvd0Vycm9yKG5ldyBFcnJvcihgSlNPTiBpbnZhbGlkYCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9mKGRhdGEpO1xuXG4gICAgICB9KSk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIGl0ZW0gaW4gbG9jYWwgc3RvcmFnZVxuICAgKiBAcGFyYW0ga2V5IFRoZSBpdGVtJ3Mga2V5XG4gICAqIEBwYXJhbSBkYXRhIFRoZSBpdGVtJ3MgdmFsdWUsIG11c3QgTk9UIGJlIG51bGwgb3IgdW5kZWZpbmVkXG4gICAqIEByZXR1cm5zIEFuIFJ4SlMgT2JzZXJ2YWJsZSB0byB3YWl0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuXG4gICAgcmV0dXJuIHRoaXMuZGF0YWJhc2Uuc2V0SXRlbShrZXksIGRhdGEpO1xuXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbiBpdGVtIGluIGxvY2FsIHN0b3JhZ2VcbiAgICogQHBhcmFtIGtleSBUaGUgaXRlbSdzIGtleVxuICAgKiBAcmV0dXJucyBBbiBSeEpTIE9ic2VydmFibGUgdG8gd2FpdCB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb25cbiAgICovXG4gICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhYmFzZS5yZW1vdmVJdGVtKGtleSk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBpdGVtcyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICogQHJldHVybnMgQW4gUnhKUyBPYnNlcnZhYmxlIHRvIHdhaXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICAgY2xlYXIoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhYmFzZS5jbGVhcigpO1xuXG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbiBpdGVtIGluIGxvY2FsIHN0b3JhZ2UsIGFuZCBhdXRvLXN1YnNjcmliZXNcbiAgICogQHBhcmFtIGtleSBUaGUgaXRlbSdzIGtleVxuICAgKiBAcGFyYW0gZGF0YSBUaGUgaXRlbSdzIHZhbHVlLCBtdXN0IE5PVCBiZSBudWxsIG9yIHVuZGVmaW5lZFxuICAgKi9cbiAgc2V0SXRlbVN1YnNjcmliZShrZXk6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG5cbiAgICB0aGlzLnNldEl0ZW0oa2V5LCBkYXRhKS5zdWJzY3JpYmUoKCkgPT4ge30sICgpID0+IHt9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYW4gaXRlbSBpbiBsb2NhbCBzdG9yYWdlLCBhbmQgYXV0by1zdWJzY3JpYmVzXG4gICAqIEBwYXJhbSBrZXkgVGhlIGl0ZW0ncyBrZXlcbiAgICovXG4gICByZW1vdmVJdGVtU3Vic2NyaWJlKGtleTogc3RyaW5nKTogdm9pZCB7XG5cbiAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KS5zdWJzY3JpYmUoKCkgPT4ge30sICgpID0+IHt9KTtcblxuICB9XG5cbiAgLyoqIERlbGV0ZXMgYWxsIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZSwgYW5kIGF1dG8tc3Vic2NyaWJlcyAqL1xuICBjbGVhclN1YnNjcmliZSgpOiB2b2lkIHtcblxuICAgIHRoaXMuY2xlYXIoKS5zdWJzY3JpYmUoKCkgPT4ge30sICgpID0+IHt9KTtcblxuICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJ0c2xpYl8xLl9fdmFsdWVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBRWEsb0JBQW9CLEdBQUcsSUFBSSxjQUFjLENBQVMsb0JBQW9CLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxjQUFNLE9BQUEsRUFBRSxHQUFBLEVBQUUsQ0FBQyxDQUFDOzs7OztBQVFoSSwrQkFBc0MsTUFBbUM7SUFDdkUsT0FBTztRQUNMLE1BQU0sQ0FBQyxNQUFNLEdBQUcsRUFBRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0tBQ2hGLENBQUM7Q0FDSDs7Ozs7O0FDZEQ7SUFjRSw4QkFBZ0UsVUFBZ0M7c0RBQUE7UUFBaEMsZUFBVSxHQUFWLFVBQVUsQ0FBc0I7O3NCQUY3RSxFQUFFO1FBSW5CLElBQUksVUFBVSxFQUFFO1lBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBTSxVQUFVLE1BQUcsQ0FBQztTQUNoQztLQUVGOzs7Ozs7Ozs7Ozs7SUFPRCxzQ0FBTzs7Ozs7O0lBQVAsVUFBaUIsR0FBVztRQUUxQixxQkFBTSxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBSyxDQUFDLENBQUM7UUFDbEUscUJBQUksVUFBVSxHQUFhLElBQUksQ0FBQztRQUVoQyxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUU7WUFFeEIsSUFBSTtnQkFDRixVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUN2QztZQUFDLHdCQUFPLEtBQUssRUFBRTtnQkFDZCxPQUFPLFVBQVUsQ0FBQyxJQUFJLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFD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\n",null]}